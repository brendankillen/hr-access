CREATE USER HRACCESS PASSWORD 'HRACCESS';
CREATE SCHEMA IF NOT EXISTS HRACCESS;

CREATE SEQUENCE HRACCESS.HIBERNATE_SEQUENCE START WITH 1000 INCREMENT BY 1;

CREATE TABLE HRACCESS.DEPARTMENT (ID INTEGER NOT NULL, NAME VARCHAR(255) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE HRACCESS.EMPLOYEE (ID INTEGER NOT NULL, BONUS DOUBLE, FIRST_NAME VARCHAR(255) NOT NULL, LAST_NAME VARCHAR(255) NOT NULL, MANAGER_ID INTEGER NOT NULL, SALARY DOUBLE, VACATION_BALANCE INTEGER, DEPARTMENT_ID INTEGER, ROLE_ID INTEGER, USER_ID INTEGER, PRIMARY KEY (ID));
CREATE TABLE HRACCESS.EMPLOYEE_FINANCES (EMPLOYEE_ID INTEGER NOT NULL, FINANCES_ID INTEGER NOT NULL);
CREATE TABLE HRACCESS.FINANCE (ID INTEGER NOT NULL, ADDED TIMESTAMP NOT NULL, TYPE VARCHAR(255) NOT NULL, OLD_VALUE DOUBLE NOT NULL, NEW_VALUE DOUBLE NOT NULL, PRIMARY KEY (ID));
CREATE TABLE HRACCESS.ROLE (ID INTEGER NOT NULL, TYPE VARCHAR(255) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE HRACCESS.USER (ID INTEGER NOT NULL, USER_ENABLED BOOLEAN NOT NULL, PASSWORD VARCHAR(255) NOT NULL, PRIVILEGE VARCHAR(255) NOT NULL, USER_NAME VARCHAR(255) NOT NULL, FAILED_COUNT INTEGER, PRIMARY KEY (ID))

ALTER TABLE HRACCESS.EMPLOYEE_FINANCES ADD CONSTRAINT UK_O7VHJFHUJMMDWM5EVQRN26GCV UNIQUE (FINANCES_ID);
ALTER TABLE HRACCESS.USER ADD CONSTRAINT UK_LQJRCOBRH9JC8WPCAR64Q1BFH UNIQUE (USER_NAME);
ALTER TABLE HRACCESS.EMPLOYEE ADD CONSTRAINT FKBEJTWVG9BXUS2MFFSM3SWJ3U9 FOREIGN KEY (DEPARTMENT_ID) REFERENCES HRACCESS.DEPARTMENT;
ALTER TABLE HRACCESS.EMPLOYEE ADD CONSTRAINT FK3046KVJYYSQ288VY3LSBTC9NW FOREIGN KEY (ROLE_ID) REFERENCES HRACCESS.ROLE;
ALTER TABLE HRACCESS.EMPLOYEE ADD CONSTRAINT FK6LK0XML9R7OKJDQ0ONKA4YTJU FOREIGN KEY (USER_ID) REFERENCES HRACCESS.USER;
ALTER TABLE HRACCESS.EMPLOYEE_FINANCES ADD CONSTRAINT FKAOS1CEC834L39U9IS530XG40K FOREIGN KEY (FINANCES_ID) REFERENCES HRACCESS.FINANCE;
ALTER TABLE HRACCESS.EMPLOYEE_FINANCES ADD CONSTRAINT FK1LD4FJ9728M64PP9TPUIP9GUV FOREIGN KEY (EMPLOYEE_ID) REFERENCES HRACCESS.EMPLOYEE;

GRANT ALL ON HRACCESS.EMPLOYEE TO HRACCESS; 
GRANT ALL ON HRACCESS.EMPLOYEE_FINANCES TO HRACCESS;
GRANT ALL ON HRACCESS.FINANCE TO HRACCESS;
GRANT ALL ON HRACCESS.ROLE TO HRACCESS;
GRANT ALL ON HRACCESS.USER TO HRACCESS;
GRANT ALL ON HRACCESS.DEPARTMENT TO HRACCESS;

INSERT INTO HRACCESS.DEPARTMENT VALUES (1, 'HR');
INSERT INTO HRACCESS.DEPARTMENT VALUES (2, 'IT');

INSERT INTO HRACCESS.ROLE VALUES (1, 'MANAGER');
INSERT INTO HRACCESS.ROLE VALUES (2, 'EMPLOYEE');